{% extends "base.html" %}

{% block title %}Mes Machines Virtuelles - VMaster{% endblock %}

{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='vms.css') }}">

<div class="dashboard-container">
    <main>
        <h1>üñ•Ô∏è Mes Machines Virtuelles</h1>

        {% if vms %}
        <table class="vm-table">
            <tr>
                <th>Nom</th>
                <th>OS</th>
                <th>CPU</th>
                <th>RAM</th>
                <th>Stockage</th>
                <th>Status</th>
                <th>Actions</th>
            </tr>

            {% for vm in vms %}
            <tr>
                <td><a href="{{ url_for('vm_details', vm_id=vm.id) }}" class="vm-name-link">{{ vm.name }}</a></td>
                <td>{{ vm.os }}</td>
                <td>{{ vm.cpu }}</td>
                <td>{{ vm.ram }} MB</td>
                <td>{{ vm.storage }} GB</td>
                <td>
                    {% if vm.status == 'running' %}
                        <span class="status running">üü¢ Running</span>
                    {% elif vm.status == 'stopped' %}
                        <span class="status stopped">üî¥ Stopped</span>
                    {% else %}
                        <span class="status creating">‚öôÔ∏è {{ vm.status }}</span>
                    {% endif %}
                </td>
                <td class="action-buttons">
                    <form method="POST" action="/vms/{{ vm.id }}/start">
                        <button type="submit" class="btn-start">Start</button>
                    </form>
                    <form method="POST" action="/vms/{{ vm.id }}/stop">
                        <button type="submit" class="btn-stop">Stop</button>
                    </form>
                    <form method="POST" action="/vms/{{ vm.id }}/delete">
                        <button type="submit" class="btn-delete" onclick="return confirm('Supprimer cette VM ?')">Delete</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </table>
        {% else %}
            <p class="no-vm">Aucune machine virtuelle cr√©√©e pour l‚Äôinstant.</p>
        {% endif %}
    </main>
</div>
{% endblock %}
